


# Wallet Service

REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–º–∏ –∫–æ—à–µ–ª—å–∫–∞–º–∏ –∏ –¥–µ–Ω–µ–∂–Ω—ã–º–∏ –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –°–æ–∑–¥–∞–Ω–∏–µ —Å—á–µ—Ç–æ–≤ –≤ —Ä–∞–∑–Ω—ã—Ö –≤–∞–ª—é—Ç–∞—Ö
- –î–µ–Ω–µ–∂–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏
- –ó–∞—â–∏—Ç–∞ –æ—Ç race conditions –∏ deadlock –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ H2 (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞) –∏ PostgreSQL (–ø—Ä–æ–¥–∞–∫—à–µ–Ω)

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Java 17+
- Gradle 7+

## üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã –¥–≤–∞ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:

### Swagger UI - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
http://localhost:8080/swagger-ui/index.html

**–î–ª—è —á–µ–≥–æ:** –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API. –ü–æ–∑–≤–æ–ª—è–µ—Ç:
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ endpoints
- –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞
- –í–∏–¥–µ—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤


### H2 Console - –ü—Ä–æ—Å–º–æ—Ç—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
http://localhost:8080/h2-console

**–î–ª—è —á–µ–≥–æ:** –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö. –ü–æ–∑–≤–æ–ª—è–µ—Ç:
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –∏ –¥–∞–Ω–Ω—ã–µ
- –í—ã–ø–æ–ª–Ω—è—Ç—å SQL-–∑–∞–ø—Ä–æ—Å—ã
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø–µ—Ä–∞—Ü–∏–π

**–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**
- JDBC URL: `jdbc:h2:mem:walletdb`
- Username: `admin`
- Password: (–æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º)




## üìö API

### –°—á–µ—Ç–∞

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| POST | `/accounts` | –°–æ–∑–¥–∞—Ç—å —Å—á—ë—Ç |
| GET | `/accounts/{id}` | –ü–æ–ª—É—á–∏—Ç—å —Å—á—ë—Ç |
| GET | `/accounts/{id}/balance` | –ü–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å |
| POST | `/accounts/{id}/deposit` | –ü–æ–ø–æ–ª–Ω–∏—Ç—å —Å—á—ë—Ç |

### –ü–µ—Ä–µ–≤–æ–¥—ã

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| POST | `/transfers` | –ü–µ—Ä–µ–≤–æ–¥ –ø–æ ID —Å—á–µ—Ç–æ–≤ |
| POST | `/transfers/by-names` | –ü–µ—Ä–µ–≤–æ–¥ –ø–æ –∏–º–µ–Ω–∞–º –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ |
| GET | `/transfers/{id}` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–µ—Ä–µ–≤–æ–¥–µ |

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

**–°–æ–∑–¥–∞—Ç—å —Å—á—ë—Ç:**
```json
POST /accounts
{
  "ownerName": "John Doe",
  "currency": "USD"
}
```

**–ü–µ—Ä–µ–≤–æ–¥:**
```json
POST /transfers
{
  "fromAccountId": "uuid-from",
  "toAccountId": "uuid-to",
  "amount": 50.00
}
```

## üîí –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- **–ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏** –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç race conditions
- **–î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫** –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è deadlock
- **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å** –≤—Å–µ—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π



